{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vinicius.melo\\\\Desktop\\\\Arquivos\\\\Projetos\\\\barber-app\\\\client\\\\src\\\\contexts\\\\AuthContext.js\";\nimport React, { createContext, useEffect, useState } from \"react\";\nimport UsuarioService from \"../services/UsuarioService\";\nconst AuthContext = createContext({});\nexport const USER_INFO_KEY = 'USER_INFO';\nexport const AuthProvider = ({\n  children\n}) => {\n  const [nome, setNome] = useState('');\n  const [email, setEmail] = useState('');\n  const [database, setDatabase] = useState('');\n  useEffect(() => {\n    getUserInfo();\n  }, []);\n\n  const hasInStorage = () => !!localStorage.getItem(USER_INFO_KEY);\n\n  const getInStorage = () => {\n    const userInfo = localStorage.getItem(USER_INFO_KEY);\n    const {\n      nome,\n      email,\n      database\n    } = JSON.parse(userInfo);\n    setNome(nome);\n    setEmail(email);\n    setDatabase(database);\n  };\n\n  const getUserInfoAPI = async () => {\n    const {\n      data\n    } = await UsuarioService.getInfo();\n    const {\n      nome,\n      email,\n      database\n    } = data;\n    setNome(nome);\n    setEmail(email);\n    setDatabase(database);\n    localStorage.setItem(USER_INFO_KEY, JSON.stringify(data));\n  };\n\n  function getUserInfo() {\n    if (hasInStorage()) {\n      return getInStorage();\n    }\n\n    getUserInfoAPI();\n  }\n\n  return /*#__PURE__*/React.createElement(AuthContext.Provider, {\n    value: {\n      nome,\n      email,\n      database\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, children);\n};\nexport default AuthContext;","map":{"version":3,"sources":["C:/Users/vinicius.melo/Desktop/Arquivos/Projetos/barber-app/client/src/contexts/AuthContext.js"],"names":["React","createContext","useEffect","useState","UsuarioService","AuthContext","USER_INFO_KEY","AuthProvider","children","nome","setNome","email","setEmail","database","setDatabase","getUserInfo","hasInStorage","localStorage","getItem","getInStorage","userInfo","JSON","parse","getUserInfoAPI","data","getInfo","setItem","stringify"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,aAAf,EAA8BC,SAA9B,EAAyCC,QAAzC,QAAwD,OAAxD;AACA,OAAOC,cAAP,MAA2B,4BAA3B;AAEA,MAAMC,WAAW,GAAGJ,aAAa,CAAC,EAAD,CAAjC;AACA,OAAO,MAAMK,aAAa,GAAG,WAAtB;AAEP,OAAO,MAAMC,YAAY,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAgB;AACxC,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBP,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACQ,KAAD,EAAQC,QAAR,IAAoBT,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACU,QAAD,EAAWC,WAAX,IAA0BX,QAAQ,CAAC,EAAD,CAAxC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACZa,IAAAA,WAAW;AACd,GAFQ,EAEN,EAFM,CAAT;;AAIA,QAAMC,YAAY,GAAG,MAAM,CAAC,CAACC,YAAY,CAACC,OAAb,CAAqBZ,aAArB,CAA7B;;AAEA,QAAMa,YAAY,GAAG,MAAM;AACvB,UAAMC,QAAQ,GAAGH,YAAY,CAACC,OAAb,CAAqBZ,aAArB,CAAjB;AACA,UAAM;AAACG,MAAAA,IAAD;AAAOE,MAAAA,KAAP;AAAcE,MAAAA;AAAd,QAA0BQ,IAAI,CAACC,KAAL,CAAWF,QAAX,CAAhC;AACAV,IAAAA,OAAO,CAACD,IAAD,CAAP;AACAG,IAAAA,QAAQ,CAACD,KAAD,CAAR;AACAG,IAAAA,WAAW,CAACD,QAAD,CAAX;AACH,GAND;;AAQA,QAAMU,cAAc,GAAG,YAAY;AAC/B,UAAM;AAACC,MAAAA;AAAD,QAAS,MAAMpB,cAAc,CAACqB,OAAf,EAArB;AACA,UAAM;AAAChB,MAAAA,IAAD;AAAOE,MAAAA,KAAP;AAAcE,MAAAA;AAAd,QAA0BW,IAAhC;AACAd,IAAAA,OAAO,CAACD,IAAD,CAAP;AACAG,IAAAA,QAAQ,CAACD,KAAD,CAAR;AACAG,IAAAA,WAAW,CAACD,QAAD,CAAX;AACAI,IAAAA,YAAY,CAACS,OAAb,CAAqBpB,aAArB,EAAoCe,IAAI,CAACM,SAAL,CAAeH,IAAf,CAApC;AACH,GAPD;;AASA,WAAST,WAAT,GAAuB;AACnB,QAAIC,YAAY,EAAhB,EAAoB;AAChB,aAAOG,YAAY,EAAnB;AACH;;AAEDI,IAAAA,cAAc;AACjB;;AAED,sBACI,oBAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE;AAACd,MAAAA,IAAD;AAAOE,MAAAA,KAAP;AAAcE,MAAAA;AAAd,KAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKL,QADL,CADJ;AAKH,CAzCM;AA2CP,eAAeH,WAAf","sourcesContent":["import React, {createContext, useEffect, useState} from \"react\";\r\nimport UsuarioService from \"../services/UsuarioService\";\r\n\r\nconst AuthContext = createContext({});\r\nexport const USER_INFO_KEY = 'USER_INFO';\r\n\r\nexport const AuthProvider = ({children}) => {\r\n    const [nome, setNome] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [database, setDatabase] = useState('');\r\n\r\n    useEffect(() => {\r\n        getUserInfo();\r\n    }, []);\r\n\r\n    const hasInStorage = () => !!localStorage.getItem(USER_INFO_KEY);\r\n\r\n    const getInStorage = () => {\r\n        const userInfo = localStorage.getItem(USER_INFO_KEY);\r\n        const {nome, email, database} = JSON.parse(userInfo);\r\n        setNome(nome);\r\n        setEmail(email);\r\n        setDatabase(database);\r\n    };\r\n\r\n    const getUserInfoAPI = async () => {\r\n        const {data} = await UsuarioService.getInfo();\r\n        const {nome, email, database} = data;\r\n        setNome(nome);\r\n        setEmail(email);\r\n        setDatabase(database);\r\n        localStorage.setItem(USER_INFO_KEY, JSON.stringify(data));\r\n    };\r\n\r\n    function getUserInfo() {\r\n        if (hasInStorage()) {\r\n            return getInStorage();\r\n        }\r\n\r\n        getUserInfoAPI();\r\n    }\r\n\r\n    return (\r\n        <AuthContext.Provider value={{nome, email, database}}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    )\r\n};\r\n\r\nexport default AuthContext;\r\n"]},"metadata":{},"sourceType":"module"}